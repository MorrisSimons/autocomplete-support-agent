{"map":{"version":3,"sources":["static/js/main.06ba8fc5.chunk.js"],"names":["this","push","12","module","__webpack_exports__","__webpack_require__","r","react","react_default","n","react_dom","react_dom_default","dist","streamlit_copilot_Copilot","[object Object]","super","arguments","userTextarea","suggestionTextarea","state","text","suggestion","isFocused","textAreaIsFocused","requestsThisMinute","currentMinute","Math","floor","Date","now","totalRequests","successfulRequests","failedRequests","render","theme","props","a","createElement","height_int","args","font_fam","font","f_height","f_focused","primaryColor","f_not_focused","secondaryBackgroundColor","style","fontSize","color","textColor","marginBottom","padding","backgroundColor","borderRadius","border","display","justifyContent","alignItems","onClick","resetCounters","cursor","title","tabIndex","height","width","overflowY","overflowX","position","onFocus","_onFocus","onBlur","_onBlur","marginLeft","fontFamily","marginTop","whiteSpace","outline","base","value","readOnly","ref","textarea","onChange","onKeyDown","_onTextAreaBlur","onScroll","forceUpdate","event","target","api_upl","setState","trim","callApi","then","key","preventDefault","prevState","syntheticEvent","setComponentValue","abortController","AbortController","async","abort","Promise","resolve","setTimeout","prompt_template","api_url","api_key","model_kwargs","prompt","replace","isGroq","includes","payload","validParams","model","max_tokens","temperature","top_p","stop","messages","role","content","stream","echo","headers","Content-Type","concat","console","log","response","fetch","method","body","JSON","stringify","signal","status","ok","errorText","error","Error","responseJson","json","choices","message","name","scrollTop","streamlit_copilot","Object","StrictMode","document","getElementById","5","exports"],"mappings":"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"},"code":"(this.webpackJsonpstreamlit_copilot=this.webpackJsonpstreamlit_copilot||[]).push([[0],{12:function(e,t,s){\"use strict\";s.r(t);var o=s(0),r=s.n(o),a=s(3),n=s.n(a),i=s(1);class l extends i.b{constructor(){super(...arguments),this.userTextarea=null,this.suggestionTextarea=null,this.state={text:\"\",suggestion:\"\",isFocused:!1,textAreaIsFocused:!1,requestsThisMinute:0,currentMinute:Math.floor(Date.now()/6e4),totalRequests:0,successfulRequests:0,failedRequests:0},this.render=()=>{const{theme:e}=this.props;if(!e)return r.a.createElement(\"div\",null,\"Theme is undefined, please check streamlit version.\");const t=this.props.args.height,s=e.font,o=t+\"px\",a=\"1px solid \"+e.primaryColor,n=\"1px solid \"+e.secondaryBackgroundColor;return r.a.createElement(\"div\",null,r.a.createElement(\"div\",{style:{fontSize:\"0.8em\",color:e.textColor,marginBottom:\"0.5em\",padding:\"0.5em\",backgroundColor:e.backgroundColor,borderRadius:\"0.3em\",border:\"1px solid \"+e.secondaryBackgroundColor,display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"}},r.a.createElement(\"div\",null,\"\\ud83d\\udcca \",r.a.createElement(\"strong\",null,\"API Stats:\"),\" Total: \",this.state.totalRequests,\" | \\u2705 Success: \",this.state.successfulRequests,\" | \\u274c Failed: \",this.state.failedRequests,\" | \\u23f1\\ufe0f This minute: \",this.state.requestsThisMinute,\"/\",this.props.args.rpm_limit),r.a.createElement(\"button\",{onClick:this.resetCounters,style:{fontSize:\"0.7em\",padding:\"0.2em 0.5em\",backgroundColor:e.primaryColor,color:\"white\",border:\"none\",borderRadius:\"0.3em\",cursor:\"pointer\"},title:\"Reset counters\"},\"\\ud83d\\udd04 Reset\")),r.a.createElement(\"div\",{tabIndex:0,style:{height:o,width:\"auto\",border:this.state.isFocused?a:n,borderRadius:\"0.5em\",overflowY:\"scroll\",overflowX:\"hidden\",position:\"relative\",backgroundColor:e.secondaryBackgroundColor},onFocus:this._onFocus,onBlur:this._onBlur},r.a.createElement(\"textarea\",{style:{marginLeft:\"0.5em\",fontFamily:s,marginTop:\"0.2em\",whiteSpace:\"pre-wrap\",width:\"calc(100% - 1.2em)\",height:\"100%\",border:\"none\",outline:\"none\",position:\"absolute\",backgroundColor:\"transparent\",color:\"light\"===e.base?\"rgba(41,51,62,0.5)\":\"rgba(255,255,255,0.5)\",padding:\"0\"},value:this.state.suggestion,readOnly:!0,ref:e=>{this.suggestionTextarea=e}}),r.a.createElement(\"textarea\",{style:{marginLeft:\"0.5em\",fontFamily:s,marginTop:\"0.2em\",whiteSpace:\"pre-wrap\",width:\"calc(100% - 1.2em)\",height:\"100%\",border:\"none\",outline:\"none\",position:\"absolute\",backgroundColor:\"transparent\",color:e.textColor,padding:\"0\"},value:this.state.text,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this._onTextAreaBlur,onScroll:this.onScroll,ref:e=>{this.userTextarea=e}})))},this.onScroll=()=>{this.forceUpdate()},this.onChange=e=>{const t=e.target.value,s=this.props.args.api_url;this.setState({text:t,suggestion:\"\"},()=>{\"\"!==t.trim()&&this.callApi(t,s).then(e=>{\"\"!==this.state.text.trim()&&this.setState({suggestion:this.state.text+e})})})},this.onKeyDown=e=>{\"Enter\"===e.key&&(e.preventDefault(),this.setState(e=>({text:e.suggestion,suggestion:\"\"}),()=>{const e={target:{value:this.state.text}};this.onChange(e)}))},this._onTextAreaBlur=()=>{this.setState({textAreaIsFocused:!1},()=>{i.a.setComponentValue(this.state.text),this.setState({suggestion:\"\"})})},this._onFocus=()=>{this.setState({isFocused:!0})},this._onBlur=()=>{this.setState({isFocused:!1})},this.resetCounters=()=>{this.setState({totalRequests:0,successfulRequests:0,failedRequests:0,requestsThisMinute:0})},this.abortController=new AbortController,this.callApi=async(e,t)=>{if(this.abortController.abort(),this.abortController=new AbortController,\"\"===e.trim())return\"\";const s=Math.floor(Date.now()/6e4);if(s>this.state.currentMinute)this.setState({currentMinute:s,requestsThisMinute:0});else if(this.state.requestsThisMinute>this.props.args.rpm_limit)return new Promise(s=>{setTimeout(()=>{s(this.callApi(e,t))},1e3)});const{prompt_template:o,api_url:r,api_key:a,height:n,fontFamily:i,border:l,...c}=this.props.args,u=o.replace(\"{text}\",e),h=t.includes(\"groq.com\")||t.includes(\"openai/v1/chat/completions\");let p;if(h){const e={};c.model&&(e.model=c.model),c.max_tokens&&(e.max_tokens=c.max_tokens),c.temperature&&(e.temperature=c.temperature),c.top_p&&(e.top_p=c.top_p),c.stop&&(e.stop=c.stop),p={messages:[{role:\"user\",content:u}],...e,stream:!1}}else p={prompt:u,...c,echo:!1};const d={\"Content-Type\":\"application/json\"};a&&(d.Authorization=\"Bearer \".concat(a));try{console.log(\"\\ud83d\\ude80 Making API call to:\",t),console.log(\"\\ud83d\\udce4 Request payload:\",p),console.log(\"\\ud83d\\udd11 Headers:\",d),this.setState(e=>({totalRequests:e.totalRequests+1}));const e=await fetch(t,{method:\"POST\",headers:d,body:JSON.stringify(p),signal:this.abortController.signal});if(console.log(\"\\ud83d\\udce1 Response status:\",e.status),console.log(\"\\ud83d\\udce1 Response headers:\",e.headers),!e.ok){const t=await e.text();throw console.error(\"\\u274c API Error Response:\",t),this.setState(e=>({failedRequests:e.failedRequests+1})),new Error(\"HTTP error! status: \".concat(e.status))}this.setState(e=>({requestsThisMinute:e.requestsThisMinute+1,successfulRequests:e.successfulRequests+1}));const s=await e.json();return h&&s.choices&&s.choices[0]&&s.choices[0].message?s.choices[0].message.content:s.choices&&s.choices[0]&&s.choices[0].text?s.choices[0].text:(console.error(\"Unexpected response format:\",s),\"\")}catch(m){return m instanceof Error&&\"AbortError\"===m.name||console.error(\"Error decoding response\",m),\"\"}}}componentDidUpdate(){this.userTextarea&&this.suggestionTextarea&&(this.suggestionTextarea.scrollTop=this.userTextarea.scrollTop)}}var c=Object(i.c)(l);n.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c,null)),document.getElementById(\"root\"))},5:function(e,t,s){e.exports=s(12)}},[[5,1,2]]]);","extractedComments":[]}