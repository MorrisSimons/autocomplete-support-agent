{"map":{"version":3,"sources":["static/js/main.7a449e7c.chunk.js"],"names":["this","push","12","module","__webpack_exports__","__webpack_require__","r","react","react_default","n","react_dom","react_dom_default","dist","streamlit_copilot_Copilot","[object Object]","super","arguments","userTextarea","suggestionTextarea","state","text","suggestion","isFocused","textAreaIsFocused","requestsThisMinute","currentMinute","Math","floor","Date","now","render","theme","props","a","createElement","height_int","args","font_fam","font","f_height","f_focused","primaryColor","f_not_focused","secondaryBackgroundColor","tabIndex","style","height","width","border","borderRadius","overflowY","overflowX","position","backgroundColor","onFocus","_onFocus","onBlur","_onBlur","marginLeft","fontFamily","marginTop","whiteSpace","outline","color","base","padding","value","readOnly","ref","textarea","textColor","onChange","onKeyDown","_onTextAreaBlur","onScroll","forceUpdate","event","target","api_upl","setState","trim","callApi","then","key","preventDefault","prevState","syntheticEvent","setComponentValue","abortController","AbortController","async","abort","Promise","resolve","setTimeout","prompt_template","api_url","api_key","model_kwargs","prompt","replace","isGroq","includes","payload","validParams","model","max_tokens","temperature","top_p","stop","messages","role","content","stream","echo","headers","Content-Type","concat","response","fetch","method","body","JSON","stringify","signal","ok","errorText","console","error","Error","status","responseJson","json","choices","message","name","scrollTop","streamlit_copilot","Object","StrictMode","document","getElementById","5","exports"],"mappings":"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"},"code":"(this.webpackJsonpstreamlit_copilot=this.webpackJsonpstreamlit_copilot||[]).push([[0],{12:function(t,e,s){\"use strict\";s.r(e);var o=s(0),r=s.n(o),n=s(3),i=s.n(n),a=s(1);class l extends a.b{constructor(){super(...arguments),this.userTextarea=null,this.suggestionTextarea=null,this.state={text:\"\",suggestion:\"\",isFocused:!1,textAreaIsFocused:!1,requestsThisMinute:0,currentMinute:Math.floor(Date.now()/6e4)},this.render=()=>{const{theme:t}=this.props;if(!t)return r.a.createElement(\"div\",null,\"Theme is undefined, please check streamlit version.\");const e=this.props.args.height,s=t.font,o=e+\"px\",n=\"1px solid \"+t.primaryColor,i=\"1px solid \"+t.secondaryBackgroundColor;return r.a.createElement(\"div\",{tabIndex:0,style:{height:o,width:\"auto\",border:this.state.isFocused?n:i,borderRadius:\"0.5em\",overflowY:\"scroll\",overflowX:\"hidden\",position:\"relative\",backgroundColor:t.secondaryBackgroundColor},onFocus:this._onFocus,onBlur:this._onBlur},r.a.createElement(\"textarea\",{style:{marginLeft:\"0.5em\",fontFamily:s,marginTop:\"0.2em\",whiteSpace:\"pre-wrap\",width:\"calc(100% - 1.2em)\",height:\"100%\",border:\"none\",outline:\"none\",position:\"absolute\",backgroundColor:\"transparent\",color:\"light\"===t.base?\"rgba(41,51,62,0.5)\":\"rgba(255,255,255,0.5)\",padding:\"0\"},value:this.state.suggestion,readOnly:!0,ref:t=>{this.suggestionTextarea=t}}),r.a.createElement(\"textarea\",{style:{marginLeft:\"0.5em\",fontFamily:s,marginTop:\"0.2em\",whiteSpace:\"pre-wrap\",width:\"calc(100% - 1.2em)\",height:\"100%\",border:\"none\",outline:\"none\",position:\"absolute\",backgroundColor:\"transparent\",color:t.textColor,padding:\"0\"},value:this.state.text,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this._onTextAreaBlur,onScroll:this.onScroll,ref:t=>{this.userTextarea=t}}))},this.onScroll=()=>{this.forceUpdate()},this.onChange=t=>{const e=t.target.value,s=this.props.args.api_url;this.setState({text:e,suggestion:\"\"},()=>{\"\"!==e.trim()&&this.callApi(e,s).then(t=>{\"\"!==this.state.text.trim()&&this.setState({suggestion:this.state.text+t})})})},this.onKeyDown=t=>{\"Enter\"===t.key&&(t.preventDefault(),this.setState(t=>({text:t.suggestion,suggestion:\"\"}),()=>{const t={target:{value:this.state.text}};this.onChange(t)}))},this._onTextAreaBlur=()=>{this.setState({textAreaIsFocused:!1},()=>{a.a.setComponentValue(this.state.text),this.setState({suggestion:\"\"})})},this._onFocus=()=>{this.setState({isFocused:!0})},this._onBlur=()=>{this.setState({isFocused:!1})},this.abortController=new AbortController,this.callApi=async(t,e)=>{if(this.abortController.abort(),this.abortController=new AbortController,\"\"===t.trim())return\"\";const s=Math.floor(Date.now()/6e4);if(s>this.state.currentMinute)this.setState({currentMinute:s,requestsThisMinute:0});else if(this.state.requestsThisMinute>this.props.args.rpm_limit)return new Promise(s=>{setTimeout(()=>{s(this.callApi(t,e))},1e3)});const{prompt_template:o,api_url:r,api_key:n,height:i,fontFamily:a,border:l,...c}=this.props.args,h=o.replace(\"{text}\",t),u=e.includes(\"groq.com\")||e.includes(\"openai/v1/chat/completions\");let p;if(u){const t={};c.model&&(t.model=c.model),c.max_tokens&&(t.max_tokens=c.max_tokens),c.temperature&&(t.temperature=c.temperature),c.top_p&&(t.top_p=c.top_p),c.stop&&(t.stop=c.stop),p={messages:[{role:\"user\",content:h}],...t,stream:!1}}else p={prompt:h,...c,echo:!1};const g={\"Content-Type\":\"application/json\"};n&&(g.Authorization=\"Bearer \".concat(n));try{const t=await fetch(e,{method:\"POST\",headers:g,body:JSON.stringify(p),signal:this.abortController.signal});if(!t.ok){const e=await t.text();throw console.error(\"API Error Response:\",e),new Error(\"HTTP error! status: \".concat(t.status))}this.setState(t=>({requestsThisMinute:t.requestsThisMinute+1}));const s=await t.json();return u&&s.choices&&s.choices[0]&&s.choices[0].message?s.choices[0].message.content:s.choices&&s.choices[0]&&s.choices[0].text?s.choices[0].text:(console.error(\"Unexpected response format:\",s),\"\")}catch(m){return\"AbortError\"===m.name||console.error(\"Error decoding response\",m),\"\"}}}componentDidUpdate(){this.userTextarea&&this.suggestionTextarea&&(this.suggestionTextarea.scrollTop=this.userTextarea.scrollTop)}}var c=Object(a.c)(l);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c,null)),document.getElementById(\"root\"))},5:function(t,e,s){t.exports=s(12)}},[[5,1,2]]]);","extractedComments":[]}