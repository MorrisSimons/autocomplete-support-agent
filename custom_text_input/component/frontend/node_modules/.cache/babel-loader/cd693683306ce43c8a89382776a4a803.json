{"ast":null,"code":"\"use strict\";\n\n// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getPlatformHeaders = exports.isRunningInBrowser = void 0;\nconst version_1 = require(\"../version.js\");\nconst isRunningInBrowser = () => {\n  return (\n    // @ts-ignore\n    typeof window !== 'undefined' &&\n    // @ts-ignore\n    typeof window.document !== 'undefined' &&\n    // @ts-ignore\n    typeof navigator !== 'undefined'\n  );\n};\nexports.isRunningInBrowser = isRunningInBrowser;\n/**\n * Note this does not detect 'browser'; for that, use getBrowserInfo().\n */\nfunction getDetectedPlatform() {\n  if (typeof Deno !== 'undefined' && Deno.build != null) {\n    return 'deno';\n  }\n  if (typeof EdgeRuntime !== 'undefined') {\n    return 'edge';\n  }\n  if (Object.prototype.toString.call(typeof globalThis.process !== 'undefined' ? globalThis.process : 0) === '[object process]') {\n    return 'node';\n  }\n  return 'unknown';\n}\nconst getPlatformProperties = () => {\n  const detectedPlatform = getDetectedPlatform();\n  if (detectedPlatform === 'deno') {\n    var _Deno$version$deno, _Deno$version;\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': version_1.VERSION,\n      'X-Stainless-OS': normalizePlatform(Deno.build.os),\n      'X-Stainless-Arch': normalizeArch(Deno.build.arch),\n      'X-Stainless-Runtime': 'deno',\n      'X-Stainless-Runtime-Version': typeof Deno.version === 'string' ? Deno.version : (_Deno$version$deno = (_Deno$version = Deno.version) === null || _Deno$version === void 0 ? void 0 : _Deno$version.deno) !== null && _Deno$version$deno !== void 0 ? _Deno$version$deno : 'unknown'\n    };\n  }\n  if (typeof EdgeRuntime !== 'undefined') {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': version_1.VERSION,\n      'X-Stainless-OS': 'Unknown',\n      'X-Stainless-Arch': \"other:\".concat(EdgeRuntime),\n      'X-Stainless-Runtime': 'edge',\n      'X-Stainless-Runtime-Version': globalThis.process.version\n    };\n  }\n  // Check if Node.js\n  if (detectedPlatform === 'node') {\n    var _globalThis$process$p, _globalThis$process$a, _globalThis$process$v;\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': version_1.VERSION,\n      'X-Stainless-OS': normalizePlatform((_globalThis$process$p = globalThis.process.platform) !== null && _globalThis$process$p !== void 0 ? _globalThis$process$p : 'unknown'),\n      'X-Stainless-Arch': normalizeArch((_globalThis$process$a = globalThis.process.arch) !== null && _globalThis$process$a !== void 0 ? _globalThis$process$a : 'unknown'),\n      'X-Stainless-Runtime': 'node',\n      'X-Stainless-Runtime-Version': (_globalThis$process$v = globalThis.process.version) !== null && _globalThis$process$v !== void 0 ? _globalThis$process$v : 'unknown'\n    };\n  }\n  const browserInfo = getBrowserInfo();\n  if (browserInfo) {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': version_1.VERSION,\n      'X-Stainless-OS': 'Unknown',\n      'X-Stainless-Arch': 'unknown',\n      'X-Stainless-Runtime': \"browser:\".concat(browserInfo.browser),\n      'X-Stainless-Runtime-Version': browserInfo.version\n    };\n  }\n  // TODO add support for Cloudflare workers, etc.\n  return {\n    'X-Stainless-Lang': 'js',\n    'X-Stainless-Package-Version': version_1.VERSION,\n    'X-Stainless-OS': 'Unknown',\n    'X-Stainless-Arch': 'unknown',\n    'X-Stainless-Runtime': 'unknown',\n    'X-Stainless-Runtime-Version': 'unknown'\n  };\n};\n// Note: modified from https://github.com/JS-DevTools/host-environment/blob/b1ab79ecde37db5d6e163c050e54fe7d287d7c92/src/isomorphic.browser.ts\nfunction getBrowserInfo() {\n  if (typeof navigator === 'undefined' || !navigator) {\n    return null;\n  }\n  // NOTE: The order matters here!\n  const browserPatterns = [{\n    key: 'edge',\n    pattern: /Edge(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/\n  }, {\n    key: 'ie',\n    pattern: /MSIE(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/\n  }, {\n    key: 'ie',\n    pattern: /Trident(?:.*rv\\:(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/\n  }, {\n    key: 'chrome',\n    pattern: /Chrome(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/\n  }, {\n    key: 'firefox',\n    pattern: /Firefox(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/\n  }, {\n    key: 'safari',\n    pattern: /(?:Version\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?(?:\\W+Mobile\\S*)?\\W+Safari/\n  }];\n  // Find the FIRST matching browser\n  for (const {\n    key,\n    pattern\n  } of browserPatterns) {\n    const match = pattern.exec(navigator.userAgent);\n    if (match) {\n      const major = match[1] || 0;\n      const minor = match[2] || 0;\n      const patch = match[3] || 0;\n      return {\n        browser: key,\n        version: \"\".concat(major, \".\").concat(minor, \".\").concat(patch)\n      };\n    }\n  }\n  return null;\n}\nconst normalizeArch = arch => {\n  // Node docs:\n  // - https://nodejs.org/api/process.html#processarch\n  // Deno docs:\n  // - https://doc.deno.land/deno/stable/~/Deno.build\n  if (arch === 'x32') return 'x32';\n  if (arch === 'x86_64' || arch === 'x64') return 'x64';\n  if (arch === 'arm') return 'arm';\n  if (arch === 'aarch64' || arch === 'arm64') return 'arm64';\n  if (arch) return \"other:\".concat(arch);\n  return 'unknown';\n};\nconst normalizePlatform = platform => {\n  // Node platforms:\n  // - https://nodejs.org/api/process.html#processplatform\n  // Deno platforms:\n  // - https://doc.deno.land/deno/stable/~/Deno.build\n  // - https://github.com/denoland/deno/issues/14799\n  platform = platform.toLowerCase();\n  // NOTE: this iOS check is untested and may not work\n  // Node does not work natively on IOS, there is a fork at\n  // https://github.com/nodejs-mobile/nodejs-mobile\n  // however it is unknown at the time of writing how to detect if it is running\n  if (platform.includes('ios')) return 'iOS';\n  if (platform === 'android') return 'Android';\n  if (platform === 'darwin') return 'MacOS';\n  if (platform === 'win32') return 'Windows';\n  if (platform === 'freebsd') return 'FreeBSD';\n  if (platform === 'openbsd') return 'OpenBSD';\n  if (platform === 'linux') return 'Linux';\n  if (platform) return \"Other:\".concat(platform);\n  return 'Unknown';\n};\nlet _platformHeaders;\nconst getPlatformHeaders = () => {\n  var _platformHeaders2;\n  return (_platformHeaders2 = _platformHeaders) !== null && _platformHeaders2 !== void 0 ? _platformHeaders2 : _platformHeaders = getPlatformProperties();\n};\nexports.getPlatformHeaders = getPlatformHeaders;","map":{"version":3,"mappings":"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","names":["isRunningInBrowser","window","document","navigator","exports","getDetectedPlatform","Deno","build","EdgeRuntime","Object","prototype","toString","call","globalThis","process","getPlatformProperties","detectedPlatform","version_1","normalizePlatform","os","normalizeArch","arch","version","deno","platform","browserInfo","getBrowserInfo","browser","browserPatterns","key","pattern","match","exec","userAgent","major","minor","patch","toLowerCase","includes","_platformHeaders","getPlatformHeaders"],"sourceRoot":"","sources":["../src/internal/detect-platform.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}