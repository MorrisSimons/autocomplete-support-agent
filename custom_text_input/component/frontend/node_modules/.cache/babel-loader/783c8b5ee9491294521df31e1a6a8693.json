{"ast":null,"code":"\"use strict\";\n\n// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nvar _objectSpread = require(\"/home/morrissimons/Desktop/lysa-support-agent/custom_text_input/component/frontend/node_modules/@babel/runtime/helpers/objectSpread2\");\nvar _awaitAsyncGenerator = require(\"/home/morrissimons/Desktop/lysa-support-agent/custom_text_input/component/frontend/node_modules/@babel/runtime/helpers/awaitAsyncGenerator\");\nvar _wrapAsyncGenerator = require(\"/home/morrissimons/Desktop/lysa-support-agent/custom_text_input/component/frontend/node_modules/@babel/runtime/helpers/wrapAsyncGenerator\");\nfunction _asyncIterator(iterable) { var method, async, sync, retry = 2; for (\"undefined\" != typeof Symbol && (async = Symbol.asyncIterator, sync = Symbol.iterator); retry--;) { if (async && null != (method = iterable[async])) return method.call(iterable); if (sync && null != (method = iterable[sync])) return new AsyncFromSyncIterator(method.call(iterable)); async = \"@@asyncIterator\", sync = \"@@iterator\"; } throw new TypeError(\"Object is not async iterable\"); }\nfunction AsyncFromSyncIterator(s) { function AsyncFromSyncIteratorContinuation(r) { if (Object(r) !== r) return Promise.reject(new TypeError(r + \" is not an object.\")); var done = r.done; return Promise.resolve(r.value).then(function (value) { return { value: value, done: done }; }); } return AsyncFromSyncIterator = function (s) { this.s = s, this.n = s.next; }, AsyncFromSyncIterator.prototype = { s: null, n: null, next: function () { return AsyncFromSyncIteratorContinuation(this.n.apply(this.s, arguments)); }, return: function (value) { var ret = this.s.return; return void 0 === ret ? Promise.resolve({ value: value, done: !0 }) : AsyncFromSyncIteratorContinuation(ret.apply(this.s, arguments)); }, throw: function (value) { var thr = this.s.return; return void 0 === thr ? Promise.reject(value) : AsyncFromSyncIteratorContinuation(thr.apply(this.s, arguments)); } }, new AsyncFromSyncIterator(s); }\nvar _AbstractPage_client;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ConversationCursorPage = exports.CursorPage = exports.Page = exports.PagePromise = exports.AbstractPage = void 0;\nconst tslib_1 = require(\"../internal/tslib.js\");\nconst error_1 = require(\"./error.js\");\nconst parse_1 = require(\"../internal/parse.js\");\nconst api_promise_1 = require(\"./api-promise.js\");\nconst values_1 = require(\"../internal/utils/values.js\");\nclass AbstractPage {\n  constructor(client, response, body, options) {\n    _AbstractPage_client.set(this, void 0);\n    tslib_1.__classPrivateFieldSet(this, _AbstractPage_client, client, \"f\");\n    this.options = options;\n    this.response = response;\n    this.body = body;\n  }\n  hasNextPage() {\n    const items = this.getPaginatedItems();\n    if (!items.length) return false;\n    return this.nextPageRequestOptions() != null;\n  }\n  async getNextPage() {\n    const nextOptions = this.nextPageRequestOptions();\n    if (!nextOptions) {\n      throw new error_1.OpenAIError('No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.');\n    }\n    return await tslib_1.__classPrivateFieldGet(this, _AbstractPage_client, \"f\").requestAPIList(this.constructor, nextOptions);\n  }\n  iterPages() {\n    var _this = this;\n    return _wrapAsyncGenerator(function* () {\n      let page = _this;\n      yield page;\n      while (page.hasNextPage()) {\n        page = yield _awaitAsyncGenerator(page.getNextPage());\n        yield page;\n      }\n    })();\n  }\n  [(_AbstractPage_client = new WeakMap(), Symbol.asyncIterator)]() {\n    var _this2 = this;\n    return _wrapAsyncGenerator(function* () {\n      var _iteratorAbruptCompletion = false;\n      var _didIteratorError = false;\n      var _iteratorError;\n      try {\n        for (var _iterator = _asyncIterator(_this2.iterPages()), _step; _iteratorAbruptCompletion = !(_step = yield _awaitAsyncGenerator(_iterator.next())).done; _iteratorAbruptCompletion = false) {\n          const page = _step.value;\n          for (const item of page.getPaginatedItems()) {\n            yield item;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (_iteratorAbruptCompletion && _iterator.return != null) {\n            yield _awaitAsyncGenerator(_iterator.return());\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    })();\n  }\n}\nexports.AbstractPage = AbstractPage;\n/**\n * This subclass of Promise will resolve to an instantiated Page once the request completes.\n *\n * It also implements AsyncIterable to allow auto-paginating iteration on an unawaited list call, eg:\n *\n *    for await (const item of client.items.list()) {\n *      console.log(item)\n *    }\n */\nclass PagePromise extends api_promise_1.APIPromise {\n  constructor(client, request, Page) {\n    super(client, request, async (client, props) => new Page(client, props.response, await (0, parse_1.defaultParseResponse)(client, props), props.options));\n  }\n  /**\n   * Allow auto-paginating iteration on an unawaited list call, eg:\n   *\n   *    for await (const item of client.items.list()) {\n   *      console.log(item)\n   *    }\n   */\n  [Symbol.asyncIterator]() {\n    var _this3 = this;\n    return _wrapAsyncGenerator(function* () {\n      const page = yield _awaitAsyncGenerator(_this3);\n      var _iteratorAbruptCompletion2 = false;\n      var _didIteratorError2 = false;\n      var _iteratorError2;\n      try {\n        for (var _iterator2 = _asyncIterator(page), _step2; _iteratorAbruptCompletion2 = !(_step2 = yield _awaitAsyncGenerator(_iterator2.next())).done; _iteratorAbruptCompletion2 = false) {\n          const item = _step2.value;\n          yield item;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (_iteratorAbruptCompletion2 && _iterator2.return != null) {\n            yield _awaitAsyncGenerator(_iterator2.return());\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    })();\n  }\n}\nexports.PagePromise = PagePromise;\n/**\n * Note: no pagination actually occurs yet, this is for forwards-compatibility.\n */\nclass Page extends AbstractPage {\n  constructor(client, response, body, options) {\n    super(client, response, body, options);\n    this.data = body.data || [];\n    this.object = body.object;\n  }\n  getPaginatedItems() {\n    var _this$data;\n    return (_this$data = this.data) !== null && _this$data !== void 0 ? _this$data : [];\n  }\n  nextPageRequestOptions() {\n    return null;\n  }\n}\nexports.Page = Page;\nclass CursorPage extends AbstractPage {\n  constructor(client, response, body, options) {\n    super(client, response, body, options);\n    this.data = body.data || [];\n    this.has_more = body.has_more || false;\n  }\n  getPaginatedItems() {\n    var _this$data2;\n    return (_this$data2 = this.data) !== null && _this$data2 !== void 0 ? _this$data2 : [];\n  }\n  hasNextPage() {\n    if (this.has_more === false) {\n      return false;\n    }\n    return super.hasNextPage();\n  }\n  nextPageRequestOptions() {\n    var _data;\n    const data = this.getPaginatedItems();\n    const id = (_data = data[data.length - 1]) === null || _data === void 0 ? void 0 : _data.id;\n    if (!id) {\n      return null;\n    }\n    return _objectSpread(_objectSpread({}, this.options), {}, {\n      query: _objectSpread(_objectSpread({}, (0, values_1.maybeObj)(this.options.query)), {}, {\n        after: id\n      })\n    });\n  }\n}\nexports.CursorPage = CursorPage;\nclass ConversationCursorPage extends AbstractPage {\n  constructor(client, response, body, options) {\n    super(client, response, body, options);\n    this.data = body.data || [];\n    this.has_more = body.has_more || false;\n    this.last_id = body.last_id || '';\n  }\n  getPaginatedItems() {\n    var _this$data3;\n    return (_this$data3 = this.data) !== null && _this$data3 !== void 0 ? _this$data3 : [];\n  }\n  hasNextPage() {\n    if (this.has_more === false) {\n      return false;\n    }\n    return super.hasNextPage();\n  }\n  nextPageRequestOptions() {\n    const cursor = this.last_id;\n    if (!cursor) {\n      return null;\n    }\n    return _objectSpread(_objectSpread({}, this.options), {}, {\n      query: _objectSpread(_objectSpread({}, (0, values_1.maybeObj)(this.options.query)), {}, {\n        after: cursor\n      })\n    });\n  }\n}\nexports.ConversationCursorPage = ConversationCursorPage;","map":{"version":3,"mappings":"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","names":["AbstractPage","constructor","client","response","body","options","_AbstractPage_client","tslib_1","hasNextPage","items","getPaginatedItems","length","nextPageRequestOptions","getNextPage","nextOptions","error_1","requestAPIList","iterPages","page","Symbol","asyncIterator","item","exports","PagePromise","api_promise_1","request","Page","props","data","object","CursorPage","has_more","id","query","after","ConversationCursorPage","last_id","cursor"],"sourceRoot":"","sources":["../src/core/pagination.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}