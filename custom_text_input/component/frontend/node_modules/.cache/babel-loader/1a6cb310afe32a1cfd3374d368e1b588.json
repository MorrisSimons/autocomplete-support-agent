{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/home/morrissimons/Desktop/lysa-support-agent/custom_text_input/component/frontend/node_modules/@babel/runtime/helpers/objectSpread2\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AsstDataOperationsProvider = void 0;\nconst assistant_data_1 = require(\"../../pinecone-generated-ts-fetch/assistant_data\");\nconst utils_1 = require(\"../../utils\");\nconst middleware_1 = require(\"../../utils/middleware\");\nconst assistantHostSingleton_1 = require(\"../assistantHostSingleton\");\nclass AsstDataOperationsProvider {\n  constructor(config, asstName, asstHostUrl, additionalHeaders) {\n    this.config = config;\n    this.asstName = asstName;\n    this.asstHostUrl = (0, utils_1.normalizeUrl)(asstHostUrl);\n    this.additionalHeaders = additionalHeaders;\n  }\n  async provideData() {\n    if (this.asstDataOperations) {\n      return this.asstDataOperations;\n    } else {\n      this.asstHostUrl = await assistantHostSingleton_1.AssistantHostSingleton.getHostUrl(this.config, this.asstName);\n      this.asstDataOperations = this.buildAsstDataOperationsConfig();\n    }\n    return this.asstDataOperations;\n  }\n  async provideHostUrl() {\n    if (this.asstHostUrl) {\n      return this.asstHostUrl;\n    } else {\n      this.asstHostUrl = await assistantHostSingleton_1.AssistantHostSingleton.getHostUrl(this.config, this.asstName);\n    }\n    return this.asstHostUrl;\n  }\n  buildAsstDataOperationsConfig() {\n    const {\n      apiKey\n    } = this.config;\n    const hostUrl = this.asstHostUrl;\n    const headers = this.additionalHeaders || null;\n    const apiConfig = {\n      basePath: hostUrl,\n      apiKey,\n      queryParamsStringify: utils_1.queryParamsStringify,\n      headers: _objectSpread({\n        'User-Agent': (0, utils_1.buildUserAgent)(this.config),\n        'X-Pinecone-Api-Version': assistant_data_1.X_PINECONE_API_VERSION\n      }, headers),\n      fetchApi: (0, utils_1.getFetch)(this.config),\n      middleware: middleware_1.middleware\n    };\n    return new assistant_data_1.ManageAssistantsApi(new assistant_data_1.Configuration(apiConfig));\n  }\n}\nexports.AsstDataOperationsProvider = AsstDataOperationsProvider;","map":{"version":3,"mappings":";;;;;;;AACA;AAOA;AAMA;AACA;AAEA,MAAaA,0BAA0B;EAOrCC,YACEC,MAA6B,EAC7BC,QAAgB,EAChBC,WAAoB,EACpBC,iBAA+B;IAE/B,IAAI,CAACH,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,WAAW,GAAG,wBAAY,EAACA,WAAW,CAAC;IAC5C,IAAI,CAACC,iBAAiB,GAAGA,iBAAiB;EAC5C;EAEA,MAAMC,WAAW;IACf,IAAI,IAAI,CAACC,kBAAkB,EAAE;MAC3B,OAAO,IAAI,CAACA,kBAAkB;KAC/B,MAAM;MACL,IAAI,CAACH,WAAW,GAAG,MAAMI,+CAAsB,CAACC,UAAU,CACxD,IAAI,CAACP,MAAM,EACX,IAAI,CAACC,QAAQ,CACd;MACD,IAAI,CAACI,kBAAkB,GAAG,IAAI,CAACG,6BAA6B,EAAE;;IAEhE,OAAO,IAAI,CAACH,kBAAkB;EAChC;EAEA,MAAMI,cAAc;IAClB,IAAI,IAAI,CAACP,WAAW,EAAE;MACpB,OAAO,IAAI,CAACA,WAAW;KACxB,MAAM;MACL,IAAI,CAACA,WAAW,GAAG,MAAMI,+CAAsB,CAACC,UAAU,CACxD,IAAI,CAACP,MAAM,EACX,IAAI,CAACC,QAAQ,CACd;;IAEH,OAAO,IAAI,CAACC,WAAW;EACzB;EAEAM,6BAA6B;IAC3B,MAAM;MAAEE;IAAM,CAAE,GAAG,IAAI,CAACV,MAAM;IAC9B,MAAMW,OAAO,GAAG,IAAI,CAACT,WAAW;IAChC,MAAMU,OAAO,GAAG,IAAI,CAACT,iBAAiB,IAAI,IAAI;IAC9C,MAAMU,SAAS,GAAkD;MAC/DC,QAAQ,EAAEH,OAAO;MACjBD,MAAM;MACNK,oBAAoB,EAApBC,4BAAoB;MACpBJ,OAAO;QACL,YAAY,EAAE,0BAAc,EAAC,IAAI,CAACZ,MAAM,CAAC;QACzC,wBAAwB,EAAEiB;MAAsB,GAC7CL,OAAO,CACX;MACDM,QAAQ,EAAE,oBAAQ,EAAC,IAAI,CAAClB,MAAM,CAAC;MAC/BmB,UAAU,EAAVC;KACD;IAED,OAAO,IAAIH,oCAAuB,CAAC,IAAIA,8BAAiB,CAACJ,SAAS,CAAC,CAAC;EACtE;;AA9DFQ","names":["AsstDataOperationsProvider","constructor","config","asstName","asstHostUrl","additionalHeaders","provideData","asstDataOperations","assistantHostSingleton_1","getHostUrl","buildAsstDataOperationsConfig","provideHostUrl","apiKey","hostUrl","headers","apiConfig","basePath","queryParamsStringify","utils_1","assistant_data_1","fetchApi","middleware","middleware_1","exports"],"sourceRoot":"","sources":["../../../src/assistant/data/asstDataOperationsProvider.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}