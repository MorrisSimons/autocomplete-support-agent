{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.context = void 0;\nconst types_1 = require(\"./types\");\nconst validateObjectProperties_1 = require(\"../../utils/validateObjectProperties\");\nconst errors_1 = require(\"../../errors\");\n/**\n * Retrieves [the context snippets](https://docs.pinecone.io/guides/assistant/understanding-context-snippets) used\n * by an Assistant during the retrieval process.\n *\n * @example\n * ```typescript\n * import { Pinecone } from '@pinecone-database/pinecone';\n * const pc = new Pinecone();\n * const assistantName = 'test1';\n * const assistant = pc.Assistant(assistantName);\n * const response = await assistant.context({query: \"What is the capital of France?\"});\n * console.log(response);\n * // {\n * //  snippets: [\n * //    {\n * //      type: 'text',\n * //      content: 'The capital of France is Paris.',\n * //      score: 0.9978925,\n * //      reference: [Object]\n * //    },\n * //  ],\n * //  usage: { promptTokens: 527, completionTokens: 0, totalTokens: 527 }\n * // }\n * ```\n *\n * @param assistantName - The name of the Assistant to retrieve the context snippets from.\n * @param api - The Pinecone API object.\n * @throws An error if a query is not provided.\n * @returns A promise that resolves to a {@link ContextModel} object containing the context snippets.\n */\nconst context = (assistantName, apiProvider) => {\n  return async options => {\n    validateContextOptions(options);\n    const api = await apiProvider.provideData();\n    const request = {\n      assistantName: assistantName,\n      contextRequest: {\n        query: options.query,\n        filter: options.filter,\n        messages: options.messages,\n        topK: options.topK,\n        snippetSize: options.snippetSize\n      }\n    };\n    return await api.contextAssistant(request);\n  };\n};\nexports.context = context;\nconst validateContextOptions = options => {\n  if (!options || !options.query && !options.messages) {\n    throw new errors_1.PineconeArgumentError('You must pass an object with required properties (`query`, or `messages`) to retrieve context snippets.');\n  }\n  (0, validateObjectProperties_1.ValidateObjectProperties)(options, types_1.ContextOptionsType);\n};","map":{"version":3,"mappings":";;;;;;AAKA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BO,MAAMA,OAAO,GAAG,CACrBC,aAAqB,EACrBC,WAAuC,KACrC;EACF,OAAO,MAAOC,OAAuB,IAA2B;IAC9DC,sBAAsB,CAACD,OAAO,CAAC;IAE/B,MAAME,GAAG,GAAG,MAAMH,WAAW,CAACI,WAAW,EAAE;IAC3C,MAAMC,OAAO,GAAG;MACdN,aAAa,EAAEA,aAAa;MAC5BO,cAAc,EAAE;QACdC,KAAK,EAAEN,OAAO,CAACM,KAAK;QACpBC,MAAM,EAAEP,OAAO,CAACO,MAAM;QACtBC,QAAQ,EAAER,OAAO,CAACQ,QAAQ;QAC1BC,IAAI,EAAET,OAAO,CAACS,IAAI;QAClBC,WAAW,EAAEV,OAAO,CAACU;;KAEG;IAC5B,OAAO,MAAMR,GAAG,CAACS,gBAAgB,CAACP,OAAO,CAAC;EAC5C,CAAC;AACH,CAAC;AApBYQ,eAAO;AAsBpB,MAAMX,sBAAsB,GAAID,OAAuB,IAAI;EACzD,IAAI,CAACA,OAAO,IAAK,CAACA,OAAO,CAACM,KAAK,IAAI,CAACN,OAAO,CAACQ,QAAS,EAAE;IACrD,MAAM,IAAIK,8BAAqB,CAC7B,yGAAyG,CAC1G;;EAGH,uDAAwB,EAACb,OAAO,EAAEc,0BAAkB,CAAC;AACvD,CAAC","names":["context","assistantName","apiProvider","options","validateContextOptions","api","provideData","request","contextRequest","query","filter","messages","topK","snippetSize","contextAssistant","exports","errors_1","types_1"],"sourceRoot":"","sources":["../../../src/assistant/data/context.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}