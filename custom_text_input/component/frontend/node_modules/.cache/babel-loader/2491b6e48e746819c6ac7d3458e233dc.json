{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.chatCompletion = void 0;\nconst chat_1 = require(\"./chat\");\nconst utils_1 = require(\"../../utils\");\nconst chatCompletion = (assistantName, apiProvider) => {\n  return async options => {\n    (0, chat_1.validateChatOptions)(options);\n    const api = await apiProvider.provideData();\n    const messages = (0, chat_1.messagesValidation)(options);\n    const model = (0, chat_1.modelValidation)(options);\n    const request = {\n      assistantName: assistantName,\n      searchCompletions: {\n        messages: messages,\n        stream: false,\n        model: model,\n        filter: options.filter\n      }\n    };\n    const retryWrapper = new utils_1.RetryOnServerFailure(() => api.chatCompletionAssistant(request));\n    return await retryWrapper.execute();\n  };\n};\nexports.chatCompletion = chatCompletion;","map":{"version":3,"mappings":";;;;;;AAKA;AAMA;AAGO,MAAMA,cAAc,GAAG,CAC5BC,aAAqB,EACrBC,WAAuC,KACrC;EACF,OAAO,MACLC,OAA8B,IACE;IAChC,8BAAmB,EAACA,OAAO,CAAC;IAE5B,MAAMC,GAAG,GAAG,MAAMF,WAAW,CAACG,WAAW,EAAE;IAC3C,MAAMC,QAAQ,GAAG,6BAAkB,EAACH,OAAO,CAAmB;IAC9D,MAAMI,KAAK,GAAG,0BAAe,EAACJ,OAAO,CAAC;IACtC,MAAMK,OAAO,GAAmC;MAC9CP,aAAa,EAAEA,aAAa;MAC5BQ,iBAAiB,EAAE;QACjBH,QAAQ,EAAEA,QAAQ;QAClBI,MAAM,EAAE,KAAK;QACbH,KAAK,EAAEA,KAAK;QACZI,MAAM,EAAER,OAAO,CAACQ;;KAEnB;IACD,MAAMC,YAAY,GAAG,IAAIC,4BAAoB,CAAC,MAC5CT,GAAG,CAACU,uBAAuB,CAACN,OAAO,CAAC,CACrC;IAED,OAAO,MAAMI,YAAY,CAACG,OAAO,EAAE;EACrC,CAAC;AACH,CAAC;AA3BYC,sBAAc","names":["chatCompletion","assistantName","apiProvider","options","api","provideData","messages","model","request","searchCompletions","stream","filter","retryWrapper","utils_1","chatCompletionAssistant","execute","exports"],"sourceRoot":"","sources":["../../../src/assistant/data/chatCompletion.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}