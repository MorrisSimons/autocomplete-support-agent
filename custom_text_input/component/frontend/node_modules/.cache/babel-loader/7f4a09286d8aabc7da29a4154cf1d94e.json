{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.allSettledWithThrow = void 0;\n/**\n * Like `Promise.allSettled()` but throws an error if any promises are rejected.\n */\nconst allSettledWithThrow = async promises => {\n  const results = await Promise.allSettled(promises);\n  const rejected = results.filter(result => result.status === 'rejected');\n  if (rejected.length) {\n    for (const result of rejected) {\n      console.error(result.reason);\n    }\n    throw new Error(\"\".concat(rejected.length, \" promise(s) failed - see the above errors\"));\n  }\n  // Note: TS was complaining about using `.filter().map()` here for some reason\n  const values = [];\n  for (const result of results) {\n    if (result.status === 'fulfilled') {\n      values.push(result.value);\n    }\n  }\n  return values;\n};\nexports.allSettledWithThrow = allSettledWithThrow;","map":{"version":3,"mappings":";;;;;;AAAA;;;AAGO,MAAMA,mBAAmB,GAAG,MAAUC,QAAsB,IAAkB;EACnF,MAAMC,OAAO,GAAG,MAAMC,OAAO,CAACC,UAAU,CAACH,QAAQ,CAAC;EAClD,MAAMI,QAAQ,GAAGH,OAAO,CAACI,MAAM,CAAEC,MAAM,IAAsCA,MAAM,CAACC,MAAM,KAAK,UAAU,CAAC;EAC1G,IAAIH,QAAQ,CAACI,MAAM,EAAE;IACnB,KAAK,MAAMF,MAAM,IAAIF,QAAQ,EAAE;MAC7BK,OAAO,CAACC,KAAK,CAACJ,MAAM,CAACK,MAAM,CAAC;IAC9B;IAEA,MAAM,IAAIC,KAAK,WAAIR,QAAQ,CAACI,MAAM,+CAA4C;EAChF;EAEA;EACA,MAAMK,MAAM,GAAQ,EAAE;EACtB,KAAK,MAAMP,MAAM,IAAIL,OAAO,EAAE;IAC5B,IAAIK,MAAM,CAACC,MAAM,KAAK,WAAW,EAAE;MACjCM,MAAM,CAACC,IAAI,CAACR,MAAM,CAACS,KAAK,CAAC;IAC3B;EACF;EACA,OAAOF,MAAM;AACf,CAAC;AAnBYG,2BAAmB","names":["allSettledWithThrow","promises","results","Promise","allSettled","rejected","filter","result","status","length","console","error","reason","Error","values","push","value","exports"],"sourceRoot":"","sources":["../src/lib/Util.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}