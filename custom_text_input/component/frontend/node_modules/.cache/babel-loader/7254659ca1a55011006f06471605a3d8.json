{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/home/morrissimons/Desktop/lysa-support-agent/custom_text_input/component/frontend/node_modules/@babel/runtime/helpers/objectSpread2\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UpdateCommand = void 0;\nconst errors_1 = require(\"../../errors\");\nconst validateObjectProperties_1 = require(\"../../utils/validateObjectProperties\");\nconst utils_1 = require(\"../../utils\");\nconst UpdateOptionsProperties = ['id', 'values', 'sparseValues', 'metadata'];\nclass UpdateCommand {\n  constructor(apiProvider, namespace) {\n    this.validator = options => {\n      if (options) {\n        (0, validateObjectProperties_1.ValidateObjectProperties)(options, UpdateOptionsProperties);\n      }\n      if (options && !options.id) {\n        throw new errors_1.PineconeArgumentError('You must enter a non-empty string for the `id` field in order to update a record.');\n      }\n    };\n    this.apiProvider = apiProvider;\n    this.namespace = namespace;\n  }\n  async run(options, maxRetries) {\n    this.validator(options);\n    const requestOptions = {\n      id: options['id'],\n      values: options['values'],\n      sparseValues: options['sparseValues'],\n      setMetadata: options['metadata']\n    };\n    const api = await this.apiProvider.provide();\n    const retryWrapper = new utils_1.RetryOnServerFailure(api.updateVector.bind(api), maxRetries);\n    await retryWrapper.execute({\n      updateRequest: _objectSpread(_objectSpread({}, requestOptions), {}, {\n        namespace: this.namespace\n      })\n    });\n    return;\n  }\n}\nexports.UpdateCommand = UpdateCommand;","map":{"version":3,"mappings":";;;;;;;AAOA;AACA;AACA;AA6BA,MAAMA,uBAAuB,GAAwB,CACnD,IAAI,EACJ,QAAQ,EACR,cAAc,EACd,UAAU,CACX;AAED,MAAaC,aAAa;EAIxBC,YAAYC,WAAW,EAAEC,SAAS;IAKlC,cAAS,GAAIC,OAAyB,IAAI;MACxC,IAAIA,OAAO,EAAE;QACX,uDAAwB,EAACA,OAAO,EAAEL,uBAAuB,CAAC;;MAE5D,IAAIK,OAAO,IAAI,CAACA,OAAO,CAACC,EAAE,EAAE;QAC1B,MAAM,IAAIC,8BAAqB,CAC7B,mFAAmF,CACpF;;IAEL,CAAC;IAbC,IAAI,CAACJ,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACC,SAAS,GAAGA,SAAS;EAC5B;EAaA,MAAMI,GAAG,CAACH,OAAyB,EAAEI,UAAmB;IACtD,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC;IAEvB,MAAMM,cAAc,GAAG;MACrBL,EAAE,EAAED,OAAO,CAAC,IAAI,CAAC;MACjBO,MAAM,EAAEP,OAAO,CAAC,QAAQ,CAAC;MACzBQ,YAAY,EAAER,OAAO,CAAC,cAAc,CAAC;MACrCS,WAAW,EAAET,OAAO,CAAC,UAAU;KAChC;IAED,MAAMU,GAAG,GAAG,MAAM,IAAI,CAACZ,WAAW,CAACa,OAAO,EAAE;IAC5C,MAAMC,YAAY,GAAG,IAAIC,4BAAoB,CAC3CH,GAAG,CAACI,YAAY,CAACC,IAAI,CAACL,GAAG,CAAC,EAC1BN,UAAU,CACX;IAED,MAAMQ,YAAY,CAACI,OAAO,CAAC;MACzBC,aAAa,kCAAOX,cAAc;QAAEP,SAAS,EAAE,IAAI,CAACA;MAAS;KAC9D,CAAC;IACF;EACF;;AAxCFmB","names":["UpdateOptionsProperties","UpdateCommand","constructor","apiProvider","namespace","options","id","errors_1","run","maxRetries","validator","requestOptions","values","sparseValues","setMetadata","api","provide","retryWrapper","utils_1","updateVector","bind","execute","updateRequest","exports"],"sourceRoot":"","sources":["../../../src/data/vectors/update.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}